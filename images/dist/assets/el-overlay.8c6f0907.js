import{o as te,an as de,aC as fe,bp as V,a1 as me,Q as ve,$ as Z,dm as pe,a2 as se,ai as G,Y as W,am as ye,ah as ge,c3 as be,aj as Ce,bL as q,aS as _,aT as j,d as Y,i as N,dn as H,au as C,ak as he,by as ke,a7 as we,ag as J,dp as Ee,X as A,a as O,c as U,e as X,q as k,l as o,t as Me,w as B,aa as x,aR as Se,g as Te,aw as K,av as ne,a8 as le,dq as Be,dr as De,R as Ie,al as Le,bw as Q,r as D,ds as $e,a0 as Oe,W as Ae,dt as Fe,du as ee,aP as Pe,bc as oe,at as Re,n as ze,ax as Ne,dv as Ye,bq as Xe,bT as qe,bS as He,cg as Ue,aE as Ve}from"./index.9c52b99a.js";import{U as ae}from"./event.caa1cd05.js";import{g as We}from"./scroll.9df58ebe.js";const je=(e,s,c)=>{let a={offsetX:0,offsetY:0};const r=n=>{const i=n.clientX,v=n.clientY,{offsetX:f,offsetY:p}=a,t=e.value.getBoundingClientRect(),m=t.left,w=t.top,F=t.width,P=t.height,R=document.documentElement.clientWidth,I=document.documentElement.clientHeight,z=-m+f,L=-w+p,E=R-m-F+f,M=I-w-P+p,$=h=>{const l=Math.min(Math.max(f+h.clientX-i,z),E),b=Math.min(Math.max(p+h.clientY-v,L),M);a={offsetX:l,offsetY:b},e.value.style.transform=`translate(${V(l)}, ${V(b)})`},y=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",y)},d=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",r)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",r)};te(()=>{de(()=>{c.value?d():u()})}),fe(()=>{u()})},xe=(e,s={})=>{me(e)||ve("[useLockscreen]","You need to pass a ref param to this function");const c=s.ns||Z("popup"),a=pe(()=>c.bm("parent","hidden"));if(!se||G(document.body,a.value))return;let r=0,d=!1,u="0";const n=()=>{setTimeout(()=>{Ce(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=u)},200)};W(e,i=>{if(!i){n();return}d=!G(document.body,a.value),d&&(u=document.body.style.width),r=We(c.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=ye(document.body,"overflowY");r>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),ge(document.body,a.value)}),be(()=>n())},ue=e=>{if(!e)return{onClick:q,onMousedown:q,onMouseup:q};let s=!1,c=!1;return{onClick:u=>{s&&c&&e(u),s=c=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{c=u.target===u.currentTarget}}},Ke=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},_e="overlay";var Ge=Y({name:"ElOverlay",props:Ke,emits:Ze,setup(e,{slots:s,emit:c}){const a=Z(_e),r=i=>{c("click",i)},{onClick:d,onMousedown:u,onMouseup:n}=ue(e.customMaskEvent?void 0:r);return()=>e.mask?N("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:n},[C(s,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):he("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(s,"default")])}});const Je=Ge,re=Symbol("dialogInjectionKey"),ie=_({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Qe={close:()=>!0},eo=["aria-label"],oo=["id"],to=Y({name:"ElDialogContent"}),so=Y({...to,props:ie,emits:Qe,setup(e){const s=e,{t:c}=we(),{Close:a}=Be,{dialogRef:r,headerRef:d,bodyId:u,ns:n,style:i}=J(re),{focusTrapRef:v}=J(Ee),f=De(v,r),p=A(()=>s.draggable);return je(r,d,p),(t,m)=>(O(),U("div",{ref:o(f),class:k([o(n).b(),o(n).is("fullscreen",t.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",t.alignCenter),{[o(n).m("center")]:t.center},t.customClass]),style:ne(o(i)),tabindex:"-1"},[X("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[C(t.$slots,"header",{},()=>[X("span",{role:"heading",class:k(o(n).e("title"))},Me(t.title),3)]),t.showClose?(O(),U("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=w=>t.$emit("close"))},[N(o(Te),{class:k(o(n).e("close"))},{default:B(()=>[(O(),x(Se(t.closeIcon||o(a))))]),_:1},8,["class"])],10,eo)):K("v-if",!0)],2),X("div",{id:o(u),class:k(o(n).e("body"))},[C(t.$slots,"default")],10,oo),t.$slots.footer?(O(),U("footer",{key:0,class:k(o(n).e("footer"))},[C(t.$slots,"footer")],2)):K("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=_({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Ie(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,s)=>{const a=Ae().emit,{nextZIndex:r}=Le();let d="";const u=Q(),n=Q(),i=D(!1),v=D(!1),f=D(!1),p=D(e.zIndex||r());let t,m;const w=$e("namespace",Fe),F=A(()=>{const g={},T=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(g[`${T}-margin-top`]=e.top),e.width&&(g[`${T}-width`]=V(e.width))),g}),P=A(()=>e.alignCenter?{display:"flex"}:{});function R(){a("opened")}function I(){a("closed"),a(ae,!1),e.destroyOnClose&&(f.value=!1)}function z(){a("close")}function L(){m==null||m(),t==null||t(),e.openDelay&&e.openDelay>0?{stop:t}=ee(()=>y(),e.openDelay):y()}function E(){t==null||t(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>h(),e.closeDelay):h()}function M(){function g(T){T||(v.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(g):E()}function $(){e.closeOnClickModal&&M()}function y(){!se||(i.value=!0)}function h(){i.value=!1}function l(){a("openAutoFocus")}function b(){a("closeAutoFocus")}function S(g){var T;((T=g.detail)==null?void 0:T.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&xe(i);function ce(){e.closeOnPressEscape&&M()}return W(()=>e.modelValue,g=>{g?(v.value=!1,L(),f.value=!0,p.value=e.zIndex?p.value++:r(),Oe(()=>{a("open"),s.value&&(s.value.scrollTop=0)})):i.value&&E()}),W(()=>e.fullscreen,g=>{!s.value||(g?(d=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=d)}),te(()=>{e.modelValue&&(i.value=!0,f.value=!0,L())}),{afterEnter:R,afterLeave:I,beforeLeave:z,handleClose:M,onModalClick:$,close:E,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:S,titleId:u,bodyId:n,closed:v,style:F,overlayDialogStyle:P,rendered:f,visible:i,zIndex:p}},ro=["aria-label","aria-labelledby","aria-describedby"],io=Y({name:"ElDialog",inheritAttrs:!1}),co=Y({...io,props:lo,emits:ao,setup(e,{expose:s}){const c=e,a=Pe();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},A(()=>!!c.customClass));const r=Z("dialog"),d=D(),u=D(),n=D(),{visible:i,titleId:v,bodyId:f,style:p,overlayDialogStyle:t,rendered:m,zIndex:w,afterEnter:F,afterLeave:P,beforeLeave:R,handleClose:I,onModalClick:z,onOpenAutoFocus:L,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:$}=uo(c,d);Re(re,{dialogRef:d,headerRef:u,bodyId:f,ns:r,rendered:m,style:p});const y=ue(z),h=A(()=>c.draggable&&!c.fullscreen);return s({visible:i,dialogContentRef:n}),(l,b)=>(O(),x(Ue,{to:"body",disabled:!l.appendToBody},[N(He,{name:"dialog-fade",onAfterEnter:o(F),onAfterLeave:o(P),onBeforeLeave:o(R),persisted:""},{default:B(()=>[ze(N(o(Je),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(w)},{default:B(()=>[X("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(f),class:k(`${o(r).namespace.value}-overlay-dialog`),style:ne(o(t)),onClick:b[0]||(b[0]=(...S)=>o(y).onClick&&o(y).onClick(...S)),onMousedown:b[1]||(b[1]=(...S)=>o(y).onMousedown&&o(y).onMousedown(...S)),onMouseup:b[2]||(b[2]=(...S)=>o(y).onMouseup&&o(y).onMouseup(...S))},[N(o(Ye),{loop:"",trapped:o(i),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(E),onFocusoutPrevented:o($),onReleaseRequested:o(M)},{default:B(()=>[o(m)?(O(),x(no,Xe({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(I)}),qe({header:B(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(I),titleId:o(v),titleClass:o(r).e("title")})]),default:B(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:B(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[Ne,o(i)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=Ve(fo);export{yo as E,Je as a,xe as b,ue as c,je as u};
