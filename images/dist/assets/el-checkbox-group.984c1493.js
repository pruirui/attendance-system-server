import{t as he,b as ke,e as Se,f as Te,T as W,d as x,c as Pe,g as _e,h as we,D as Ce,C as De}from"./el-date-picker.36155fb7.js";import{aS as xe,aT as Re,d as Z,a7 as Ve,$ as X,ag as Ae,X as D,r as J,a as Oe,c as Ee,e as k,q as g,l as a,t as A,i as E,aw as Ie,a8 as Me,U,bb as Ne,at as Be,bq as Fe}from"./index.9c52b99a.js";import{b as He}from"./flatten.f7ca8560.js";import{b as Ue,a as $e}from"./el-checkbox.99d107ff.js";import{s as Q,S as ye,c as Le}from"./index.921ddcd1.js";import{r as $}from"./event.caa1cd05.js";function je(){}function qe(t,o,r,i){for(var c=t.length,u=r+(i?1:-1);i?u--:++u<c;)if(o(t[u],u,t))return u;return-1}function Ge(t){return t!==t}function Ke(t,o,r){for(var i=r-1,c=t.length;++i<c;)if(t[i]===o)return i;return-1}function Ye(t,o,r){return o===o?Ke(t,o,r):qe(t,Ge,r)}function ze(t,o){var r=t==null?0:t.length;return!!r&&Ye(t,o,0)>-1}function We(t,o,r){for(var i=-1,c=t==null?0:t.length;++i<c;)if(r(o,t[i]))return!0;return!1}var Xe=1/0,Ze=$&&1/Q(new $([,-0]))[1]==Xe?function(t){return new $(t)}:je;const Je=Ze;var Qe=200;function en(t,o,r){var i=-1,c=ze,u=t.length,s=!0,d=[],b=d;if(r)s=!1,c=We;else if(u>=Qe){var T=o?null:Je(t);if(T)return Q(T);s=!1,c=Le,b=new ye}else b=o?[]:d;e:for(;++i<u;){var v=t[i],S=o?o(v):v;if(v=r||v!==0?v:0,s&&S===S){for(var R=b.length;R--;)if(b[R]===S)continue e;o&&b.push(S),d.push(v)}else c(b,S,r)||(b!==d&&b.push(S),d.push(v))}return d}var nn=Ue(function(t){return en(He(t,1,$e,!0))});const y=nn,tn=xe({...he,parsedValue:{type:Re(Array)}}),an=["disabled"],sn=Z({__name:"panel-time-range",props:tn,emits:["pick","select-range","set-picker-option"],setup(t,{emit:o}){const r=t,i=(e,n)=>{const l=[];for(let p=e;p<=n;p++)l.push(p);return l},{t:c,lang:u}=Ve(),s=X("time"),d=X("picker"),b=Ae("EP_PICKER_BASE"),{arrowControl:T,disabledHours:v,disabledMinutes:S,disabledSeconds:R,defaultValue:I}=b.props,P=D(()=>r.parsedValue[0]),_=D(()=>r.parsedValue[1]),ee=ke(r),ne=()=>{o("pick",ee.value,!1)},w=D(()=>r.format.includes("ss")),L=D(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),te=(e=!1)=>{o("pick",[P.value,_.value],e)},ae=e=>{j(e.millisecond(0),_.value)},se=e=>{j(P.value,e.millisecond(0))},oe=e=>{const n=e.map(p=>x(p).locale(u.value)),l=G(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},j=(e,n)=>{o("pick",[e,n],!0)},re=D(()=>P.value>_.value),V=J([0,2]),le=(e,n)=>{o("select-range",e,n,"min"),V.value=[e,n]},q=D(()=>w.value?11:8),ie=(e,n)=>{o("select-range",e,n,"max");const l=a(q);V.value=[e+l,n+l]},ce=e=>{const n=w.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(w.value?["seconds"]:[]),m=(n.indexOf(V.value[0])+e+n.length)%n.length,f=n.length/2;m<f?F.start_emitSelectRange(l[m]):F.end_emitSelectRange(l[m-f])},ue=e=>{const n=e.code,{left:l,right:p,up:m,down:f}=Ne;if([l,p].includes(n)){ce(n===l?-1:1),e.preventDefault();return}if([m,f].includes(n)){const h=n===m?-1:1,C=V.value[0]<q.value?"start":"end";F[`${C}_scrollDown`](h),e.preventDefault();return}},M=(e,n)=>{const l=v?v(e):[],p=e==="start",f=(n||(p?_.value:P.value)).hour(),h=p?i(f+1,23):i(0,f-1);return y(l,h)},N=(e,n,l)=>{const p=S?S(e,n):[],m=n==="start",f=l||(m?_.value:P.value),h=f.hour();if(e!==h)return p;const C=f.minute(),H=m?i(C+1,59):i(0,C-1);return y(p,H)},B=(e,n,l,p)=>{const m=R?R(e,n,l):[],f=l==="start",h=p||(f?_.value:P.value),C=h.hour(),H=h.minute();if(e!==C||n!==H)return m;const z=h.second(),ve=f?i(z+1,59):i(0,z-1);return y(m,ve)},G=([e,n])=>[K(e,"start",!0,n),K(n,"end",!1,e)],{getAvailableHours:de,getAvailableMinutes:pe,getAvailableSeconds:me}=Se(M,N,B),{timePickerOptions:F,getAvailableTime:K,onSetOption:Y}=Te({getAvailableHours:de,getAvailableMinutes:pe,getAvailableSeconds:me}),fe=e=>e?U(e)?e.map(n=>x(n,r.format).locale(u.value)):x(e,r.format).locale(u.value):null,be=e=>e?U(e)?e.map(n=>n.format(r.format)):e.format(r.format):null,ge=()=>{if(U(I))return I.map(n=>x(n).locale(u.value));const e=x(I).locale(u.value);return[e,e.add(60,"m")]};return o("set-picker-option",["formatToString",be]),o("set-picker-option",["parseUserInput",fe]),o("set-picker-option",["isValidValue",oe]),o("set-picker-option",["handleKeydownInput",ue]),o("set-picker-option",["getDefaultValue",ge]),o("set-picker-option",["getRangeAvailableTime",G]),(e,n)=>e.actualVisible?(Oe(),Ee("div",{key:0,class:g([a(s).b("range-picker"),a(d).b("panel")])},[k("div",{class:g(a(s).be("range-picker","content"))},[k("div",{class:g(a(s).be("range-picker","cell"))},[k("div",{class:g(a(s).be("range-picker","header"))},A(a(c)("el.datepicker.startTime")),3),k("div",{class:g([a(s).be("range-picker","body"),a(s).be("panel","content"),a(s).is("arrow",a(T)),{"has-seconds":a(w)}])},[E(W,{ref:"minSpinner",role:"start","show-seconds":a(w),"am-pm-mode":a(L),"arrow-control":a(T),"spinner-date":a(P),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":B,onChange:ae,onSetOption:a(Y),onSelectRange:le},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:g(a(s).be("range-picker","cell"))},[k("div",{class:g(a(s).be("range-picker","header"))},A(a(c)("el.datepicker.endTime")),3),k("div",{class:g([a(s).be("range-picker","body"),a(s).be("panel","content"),a(s).is("arrow",a(T)),{"has-seconds":a(w)}])},[E(W,{ref:"maxSpinner",role:"end","show-seconds":a(w),"am-pm-mode":a(L),"arrow-control":a(T),"spinner-date":a(_),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":B,onChange:se,onSetOption:a(Y),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:g(a(s).be("panel","footer"))},[k("button",{type:"button",class:g([a(s).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=l=>ne())},A(a(c)("el.datepicker.cancel")),3),k("button",{type:"button",class:g([a(s).be("panel","btn"),"confirm"]),disabled:a(re),onClick:n[1]||(n[1]=l=>te())},A(a(c)("el.datepicker.confirm")),11,an)],2)],2)):Ie("v-if",!0)}});var on=Me(sn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);x.extend(Pe);var rn=Z({name:"ElTimePicker",install:null,props:{..._e,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,o){const r=J(),[i,c]=t.isRange?["timerange",on]:["time",we],u=s=>o.emit("update:modelValue",s);return Be("ElPopperOptions",t.popperOptions),o.expose({focus:s=>{var d;(d=r.value)==null||d.handleFocusInput(s)},blur:s=>{var d;(d=r.value)==null||d.handleBlurInput(s)},handleOpen:()=>{var s;(s=r.value)==null||s.handleOpen()},handleClose:()=>{var s;(s=r.value)==null||s.handleClose()}}),()=>{var s;const d=(s=t.format)!=null?s:Ce;return E(De,Fe(t,{ref:r,type:i,format:d,"onUpdate:modelValue":u}),{default:b=>E(c,b,null)})}}});const O=rn;O.install=t=>{t.component(O.name,O)};const fn=O;export{fn as E};
