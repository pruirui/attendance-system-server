import{d as f,r as c,bf as y,bg as w,y as s,h as T,a as v,c as P,e as A,i as r,w as a,eb as O,x as h,ek as x}from"./index.9c52b99a.js";import{E as H,a as U}from"./el-form-item.27524c01.js";import{E as N}from"./el-checkbox-group.984c1493.js";import{E as q}from"./el-input.76522da5.js";import{E as I,c as L}from"./el-checkbox.99d107ff.js";import{E as R}from"./el-col.01f399ab.js";import{E as Y}from"./el-date-picker.36155fb7.js";import"./event.caa1cd05.js";import"./_initCloneObject.8439a0d9.js";import"./flatten.f7ca8560.js";import"./index.921ddcd1.js";const $={class:"container"},M={class:"form-box"},S=h("\u63D0\u4EA4\u66F4\u65B0"),j=f({name:"baseform"}),ae=f({...j,setup(G){const b={departmentName:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0",trigger:"blur"},{min:4,max:15,message:"\u516C\u53F8\u540D\u79F0\u4E0D\u80FD\u77ED\u4E8E4\u4E2A\u5B57\uFF0C\u957F\u4E8E15\u5B57",trigger:"blur"}],phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u7535\u8BDD",trigger:"blur"},{pattern:/^0\d{2,3}-[1-9]\d{6,7}$/,min:2,max:15,message:"\u7535\u8BDD\u683C\u5F0F\u9519\u8BEF",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5728\u533A\u57DF",trigger:"blur"}],address:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",trigger:"blur"}],rmb:[{required:!0,message:"\u8BF7\u8F93\u5165\u6CE8\u518C\u8D44\u672C",trigger:"blur"},{pattern:/^([1-9]\d*)(\.\d+)?$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6CE8\u518C\u8D44\u672C",trigger:"blur"}],description:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u53F8\u7B80\u4ECB",trigger:"blur"}],startTime:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0A\u73ED\u65F6\u95F4",trigger:"blur"}],endTime:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0B\u73ED\u65F6\u95F4",trigger:"blur"}],workdays:[{required:!0,message:"\u8BF7\u9009\u62E9\u5DE5\u4F5C\u65E5",trigger:"blur"}],workOverLimit:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u957F\u52A0\u73ED\u65F6\u957F",trigger:"blur"},{pattern:/^([1-9]\d*)(\.\d+)?$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u503C",trigger:"blur"}],hourPay:[{pattern:/^([1-9]\d*)(\.\d+)?$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u503C",trigger:"blur"}],workOverPay:[{pattern:/^([1-9]\d*)(\.\d+)?$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u6570\u503C",trigger:"blur"}]},p=c(),e=y({departmentid:"",departmentName:"",HRuid:"",description:"",hourPay:"",workOverPay:"",workOverLimit:"",startTime:"",endTime:"",workdays:[],phone:"",address:"",rmb:"",region:[],createTime:""}),n=localStorage.getItem("ms_userId"),F=localStorage.getItem("departmentId"),_=w();n===null&&(s.error("\u672A\u68C0\u6D4B\u5230\u7528\u6237\u767B\u5165\uFF0C\u8BF7\u767B\u5165\uFF01"),localStorage.clear(),_.push("/login"));const E=()=>{F!==null&&O(F).then(m=>{if(console.log(m),m.status!=200){s.error("\u51FA\u9519\u4E86");return}let u=m.data.data;e.departmentid=u.departmentid,e.departmentName=u.departmentName,e.HRuid=u.HRuid,e.description=u.description,e.hourPay=u.hourPay,e.workOverPay=u.workOverPay,e.workOverLimit=u.workOverLimit,e.startTime=u.startTime,e.endTime=u.endTime,e.workdays=u.workdays,e.phone=u.phone,e.address=u.address,e.rmb=u.rmb;let o=u.rmb.length;e.rmb=u.rmb.substr(0,o-1),e.createTime=u.createTime,console.log(e)})};E();const B=m=>{!m||m.validate(u=>{if(u){if(n===null)return!1;e.HRuid=n,e.address=e.region.join("")+e.address,x(e.departmentid,e.departmentName,e.HRuid,e.description,e.hourPay,e.workOverPay,e.workOverLimit,e.startTime,e.endTime,e.workdays,e.phone,e.address,e.rmb,e.createTime).then(o=>{if(o.status!=200){s.error("\u51FA\u9519\u4E86");return}let l=o.data;l.code==1?(s.success(l.msg),E()):s.error(l.msg)}).catch(o=>{s.error("\u7F51\u8DEF\u8D85\u65F6\uFF01")})}else return!1})};return(m,u)=>{const o=q,l=H,D=Y,i=R,d=I,V=L,g=N,C=T,k=U;return v(),P("div",$,[A("div",M,[r(k,{ref_key:"formRef",ref:p,rules:b,model:e,"label-width":"130px"},{default:a(()=>[r(l,{label:"\u516C\u53F8\u540D",prop:"departmentName"},{default:a(()=>[r(o,{modelValue:e.departmentName,"onUpdate:modelValue":u[0]||(u[0]=t=>e.departmentName=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u516C\u53F8\u7535\u8BDD",prop:"phone"},{default:a(()=>[r(o,{modelValue:e.phone,"onUpdate:modelValue":u[1]||(u[1]=t=>e.phone=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u6CE8\u518C\u8D44\u672C(\u4E07\u5143)",prop:"rmb"},{default:a(()=>[r(o,{modelValue:e.rmb,"onUpdate:modelValue":u[2]||(u[2]=t=>e.rmb=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"address"},{default:a(()=>[r(o,{modelValue:e.address,"onUpdate:modelValue":u[3]||(u[3]=t=>e.address=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u6CE8\u518C\u65E5\u671F"},{default:a(()=>[r(i,{span:12},{default:a(()=>[r(l,{prop:"createTime"},{default:a(()=>[r(D,{type:"date",placeholder:"\u9009\u62E9\u65E5\u671F",modelValue:e.createTime,"onUpdate:modelValue":u[4]||(u[4]=t=>e.createTime=t),style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(l,{label:"\u5DE5\u4F5C\u65E5",prop:"workdays"},{default:a(()=>[r(V,{modelValue:e.workdays,"onUpdate:modelValue":u[5]||(u[5]=t=>e.workdays=t)},{default:a(()=>[r(d,{label:"\u661F\u671F\u4E00",name:"0"}),r(d,{label:"\u661F\u671F\u4E8C",name:"1"}),r(d,{label:"\u661F\u671F\u4E09",name:"2"}),r(d,{label:"\u661F\u671F\u56DB",name:"3"}),r(d,{label:"\u661F\u671F\u4E94",name:"4"}),r(d,{label:"\u661F\u671F\u516D",name:"5"}),r(d,{label:"\u661F\u671F\u65E5",name:"6"})]),_:1},8,["modelValue"])]),_:1}),r(l,{label:"\u4E0A\u73ED\u65F6\u95F4",prop:"startTime"},{default:a(()=>[r(i,{span:11},{default:a(()=>[r(l,{prop:"startTime"},{default:a(()=>[r(g,{placeholder:"\u9009\u62E9\u65F6\u95F4",modelValue:e.startTime,"onUpdate:modelValue":u[6]||(u[6]=t=>e.startTime=t),style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(l,{label:"\u4E0B\u73ED\u65F6\u95F4",prop:"endTime"},{default:a(()=>[r(i,{span:11},{default:a(()=>[r(l,{prop:"endTime"},{default:a(()=>[r(g,{placeholder:"\u9009\u62E9\u65F6\u95F4",modelValue:e.endTime,"onUpdate:modelValue":u[7]||(u[7]=t=>e.endTime=t),style:{width:"100%"},format:"HH:mm","value-format":"HH:mm"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(l,{label:"\u4E0A\u73ED\u65F6\u85AA",prop:"hourPay"},{default:a(()=>[r(o,{modelValue:e.hourPay,"onUpdate:modelValue":u[8]||(u[8]=t=>e.hourPay=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u52A0\u73ED\u65F6\u85AA",prop:"workOverPay"},{default:a(()=>[r(o,{modelValue:e.workOverPay,"onUpdate:modelValue":u[9]||(u[9]=t=>e.workOverPay=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u52A0\u73ED\u6700\u957F\u65F6\u957F(h)",prop:"workOverLimit"},{default:a(()=>[r(o,{modelValue:e.workOverLimit,"onUpdate:modelValue":u[10]||(u[10]=t=>e.workOverLimit=t)},null,8,["modelValue"])]),_:1}),r(l,{label:"\u516C\u53F8\u7B80\u4ECB",prop:"description"},{default:a(()=>[r(o,{type:"textarea",rows:"5",modelValue:e.description,"onUpdate:modelValue":u[11]||(u[11]=t=>e.description=t)},null,8,["modelValue"])]),_:1}),r(l,null,{default:a(()=>[r(C,{type:"primary",onClick:u[12]||(u[12]=t=>B(p.value))},{default:a(()=>[S]),_:1})]),_:1})]),_:1},8,["model"])])])}}});export{ae as default};
